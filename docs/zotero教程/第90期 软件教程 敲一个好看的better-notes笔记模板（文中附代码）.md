---
å…¬ä¼—å·å†…å®¹:
  - zoteroæ•™ç¨‹
rating:
  - â­â­â­â­
ç®€è®°: å¾ˆå¥½
ç±»å‹: å…¬ä¼—å·
---

>ç¬¬90æœŸ **æ•²ä¸€ä¸ªå¥½çœ‹çš„betternotesæ’ä»¶æ¨¡æ¿ï¼ˆæ–‡ä¸­é™„ä»£ç ï¼‰**
>
>zotero7betaçš„zotero-better-notesæ’ä»¶æ›´æ–°ååŠŸèƒ½æ€§æå¤§æå‡ï¼Œ**åšäº†ä¸€ä¸ªæ¨¡æ¿æ¥ä¼˜åŒ–è‡ªåŠ¨ç¬”è®°**
>
>æœ¬æœŸåˆ†äº«ä¸€ä¸‹è‡ªå·±åˆ¶ä½œçš„**ç¬”è®°æ¨¡æ¿**
>
>é’ˆå¯¹æˆ‘å¯¹æ¨¡æ¿çš„æœŸæœ›ï¼š**ç¾è§‚æ€§ï¼ˆè®ºæ–‡åŸºç¡€ä¿¡æ¯ï¼Œå¥½çš„æ¡†æ¶ï¼‰ å®ç”¨æ€§ï¼ˆç›¸å…³é“¾æ¥ï¼Œæ³¨é‡Šæ·»åŠ ï¼Œä¼ªç›®å½•è·³è½¬ï¼‰**

## æœ¬æœŸå¤§çº²

[TOC]

## å‚è€ƒç½‘ç«™

æ’ä»¶æ•™ç¨‹ï¼š**ç¬¬87æœŸ better-notesæ•™ç¨‹**

æ¨¡æ¿åˆ¶ä½œæ•™ç¨‹ç½‘ç«™ï¼š[zotero-better-notes (github.com)ç¬”è®°åˆ¶ä½œæ€»æ•™ç¨‹](https://github.com/windingwind/zotero-better-notes/blob/master/docs/about-note-template.md#note-template-structure)

å®˜æ–¹æ¡ç›®ä¿¡æ¯(æƒ³è‡ªå·±ä¿®æ”¹æ¨¡æ¿å¯ä»¥çœ‹çœ‹ï¼‰ï¼š[zotero-map-journalArticle](https://aurimasv.github.io/z2csl/typeMap.xml#map-journalArticle)

[æ›´å¤šæ¨¡æ¿ï¼ˆä¸€äº›æ¡ç›®ä¿¡æ¯ç‰‡æ®µæ˜¯å‚è€ƒè¿™é‡Œçš„ï¼‰](https://github.com/windingwind/zotero-better-notes/discussions/categories/note-templates)

## æ¨¡æ¿æ•ˆæœ

![æ¨¡æ¿æ•ˆæœ](https://pic-go-42.oss-cn-guangzhou.aliyuncs.com/img/202404191159827.gif)

## æ¨¡æ¿ä½¿ç”¨

ä¾§æ ç¬”è®°çŠ¶æ€çš„ç›®å½•è·³è½¬æœ‰ç‚¹é—®é¢˜å‘€ï¼Œ**è¿˜æ˜¯æ¨èåœ¨better-notesçš„ç¬”è®°çª—å£çœ‹ç¬”è®°**ï¼Œæˆ–è€…æŠŠç¬”è®°é‚£ä¸€æ®µbetter-notesä»£ç åˆ é™¤å°±è¡Œ

ä¸ºSCIé˜…è¯»æä¾›çš„æ¨¡æ¿ï¼Œå› ä¸ºéœ€è¦è°ƒç”¨æ‘˜è¦ç¿»è¯‘æ ‡é¢˜ç¿»è¯‘è¿™æ ·çš„å…ƒä¿¡æ¯ï¼Œ**ä¸­æ–‡æ–‡çŒ®å’Œå…¶å®ƒç±»å‹æ˜¯ä¸å…¼å®¹çš„**

æ¨¡æ¿åŸºäºbeta74ç‰ˆæœ¬ï¼Œéœ€è¦æ’ä»¶ï¼š**zotero-styleï¼›zotero-translateï¼›zotero-betternotes**

better-notesçš„æ¨¡æ¿ä»£ç åšå¥½åï¼Œåœ¨æ¨¡æ¿ç¼–è¾‘å™¨å’Œç¬”è®°åŒºçš„æ˜¾ç¤ºå¹¶ä¸ä¸€è‡´ã€‚æŸäº›æ ·å¼è®¾ç½®æ— æ³•æ˜¾ç¤ºï¼Œæ‰€ä»¥ä¸ºäº†æ›´å¥½çš„æ˜¾ç¤ºæ•ˆæœï¼Œ**æˆ‘é‡‡ç”¨çš„æ˜¯â€œcssä»£ç â€+â€œæ¨¡æ¿ä»£ç â€ç»“åˆä½¿ç”¨çš„æ–¹å¼**ï¼Œæ•ˆæœå°±æ˜¯ä¸Šå›¾ï¼Œä½¿ç”¨æ–¹å¼è§ä¸‹

### Betternoteæ¨¡æ¿å®‰è£…

![betternoteæ¨¡æ¿å®‰è£…](https://pic-go-42.oss-cn-guangzhou.aliyuncs.com/img/202404191216818.png)

betternotejsæ¨¡æ¿

```javascript
# This template is specifically for importing/sharing, using better 
# notes 'import from clipboard': copy the content and
# goto Zotero menu bar, click Edit->New Template from Clipboard.  
# Do not copy-paste this to better notes template editor directly.
name: "[Item] sci_paper_by_wk"
content: |-
  <!-- author:wk-->
  
  <h1 style="font-size: 1.4em; margin-bottom: 2em; margin-right: 5px; padding: 8px 15px;letter-spacing: 2px;color: #000000;border-left: 10px solid rgba(240, 19, 19, 0.5);background: rgba(240, 19, 19, 0.25); border-radius: 5px; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2); box-shadow: 1px 1px 2px rgba(51, 51, 51, 0.5); text-align: center">${topItem.getField("title")}</h1>
  
  
  <table style="width:100%; border-collapse: collapse;">
    <tr>
      <th style="border: 1px solid black; min-width: 35%; padding: 8px; text-align: left;">æ ‡é¢˜ç¿»è¯‘</th>
      <td style="border: 1px solid black; padding: 8px;">${topItem.getField("titleTranslation")}</td>
    </tr>
    <tr>
      <th style="border: 1px solid black; min-width: 35%; padding: 8px; text-align: left;">ä½œè€…</th>
      <td style="border: 1px solid black; padding: 8px;">	${topItem.getCreators().map((v) => v.firstName + " " + v.lastName).join("; ")}</td>
    </tr>
    <tr>
      <th style="border: 1px solid black; min-width: 35%; padding: 8px; text-align: left;">å‡ºç‰ˆå¹´ä»½</th>
      <td style="border: 1px solid black; padding: 8px; text-align: center;">${topItem.getField('date')}</td>
    </tr>
    <tr>
      <th style="border: 1px solid black; min-width: 35%; padding: 8px; text-align: left;">æœŸåˆŠ</th>
      <td style="border: 1px solid black; padding: 8px; text-align: center;">${topItem.getField('publicationTitle')}</td>
    </tr>
    <tr>
      <th style="border: 1px solid black; min-width: 35%; padding: 8px; text-align: left;">æœŸåˆŠç­‰çº§</th>
      <td style="border: 1px solid black; padding: 8px; text-align: center;">${{
  let space = " ã…¤ã…¤ ã…¤ã…¤"
  return Array.prototype.map.call(
  	Zotero.ZoteroStyle.api.renderCell(topItem, "publicationTags").childNodes,
  	e => {
  		e.innerText =  space + e.innerText + space;
  		return e.outerHTML
  	}
  	).join(space)
  }}$</td>
  </tr>
    <tr>
      <th style="border: 1px solid black; min-width: 35%; padding: 8px; text-align: center;">è®ºæ–‡æ ‡ç­¾</th>
      <td style="border: 1px solid black; text-align: center; padding: 8px;">${topItem.getTags().map(tagObj=>tagObj.tag)}</td>
    </tr>
    <tr>
      <th style="border: 1px solid black; padding: 8px; text-align: left;">é™„ä»¶é“¾æ¥</th>
      <td style="border: 1px solid black; padding: 8px;color:#4A148C">
      <a href=${{
    async function getPDFLink(item) {
      const att = await item.getBestAttachment();
      if (!att || !att.isPDFAttachment()) {
        return "";
      }
      key = att.key;
      if (att.libraryID === 1) {
        return `zotero://open-pdf/library/items/${key}`;
      } else {
        groupID = Zotero.Libraries.get(att.libraryID).id;
        return `zotero://open-pdf/groups/${groupID}/items/${key}`;
      }
    }
    sharedObj.getPDFLink = getPDFLink;
    return await getPDFLink(topItem);
  }}$>
          ${topItem.getField("title")}
        </a>
      </td>
    </tr>
    <tr>
      <th style="border: 1px solid black; padding: 8px; text-align: left;">æ‘˜è¦</th>
      <td style="border: 1px solid black; padding: 8px;">${topItem.getField('abstractTranslation')}</td>
    </tr>
  </table>
  
  <hr/>
  <h2 style='text-align:center'>ç›®å½•</h2>
  <table style="text-align:center;width:100%; border-collapse: collapse; margin: 0 auto; background-color: white; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
    <tr>
      <td style="padding: 10px;" ><a href="#back" style="text-decoration: none; color: black;">ç‚¹æ­¤è·³è½¬</a></td>
      <td style="padding: 10px; background-color: #FFF8E1;">ğŸ“œ èƒŒæ™¯</td>
    </tr>
    <tr>
      <td style="padding: 10px;" ><a href="#cont" style="text-decoration: none; color: black;">ç‚¹æ­¤è·³è½¬</a></td>
      <td style="padding: 10px; background-color: #F1F8E9;">ğŸ”¬ ç ”ç©¶å†…å®¹</td>
    </tr>
    <tr>
      <td style="padding: 10px;"><a  href="#result" style="text-decoration: none; color: black;">ç‚¹æ­¤è·³è½¬</a></td>
      <td style="padding: 10px; background-color: #F5F5F5;">ğŸš© ç ”ç©¶ç»“æœ</td>
    </tr>
    <tr>
      <td style="padding: 10px;" ><a href="#creat" style="text-decoration: none; color: black;">ç‚¹æ­¤è·³è½¬</a></td>
      <td style="padding: 10px; background-color: #E0F7FA;">ğŸ“Œ åˆ›æ–°ç‚¹</td>
    </tr>
    <tr>
      <td style="padding: 10px;" ><a href="#other" style="text-decoration: none; color: black;">ç‚¹æ­¤è·³è½¬</a></td>
      <td style="padding: 10px; background-color: #E1F5FE;">ğŸ”¬ å…¶å®ƒ</td>
    </tr>
    <tr>
      <td style="padding: 10px;" ><a href="#anno" style="text-decoration: none; color: black;">ç‚¹æ­¤è·³è½¬</a></td>
      <td style="padding: 10px; background-color: #E1F5FE;">ğŸ“Œ PDFæ³¨é‡Š</td>
    </tr>
  </table>
  
  <em style='font-size:7px;text-align:center!important;color:#9e9e9e;margin-top: 30px;'>ç‚¹å‡» Ctrl+å·¦é”® å³å¯è·³è½¬</em>
  
  
  
  <br/>
  <hr/>
  
  
  <h2 id="back">ğŸ“œ èƒŒæ™¯</h2> 
  <p ></p><hr/>
  <h2 id="cont">ğŸ”¬ ç ”ç©¶å†…å®¹</h2> 
  <p ></p><hr/>
  <h2 id="result" >ğŸš© ç ”ç©¶ç»“æœ</h2> 
  <p ></p><hr/>
  <h2 id="creat">ğŸ“Œ åˆ›æ–°ç‚¹</h2>
  <p ></p> <hr/>
  <h2 id="other">ğŸ”¬ å…¶å®ƒ</h2> 
  <p ></p> <hr/>
  <h2 id="anno">ğŸ“ŒPDFæ³¨é‡Š</h2>
  <p ></p>  
  ${{
    async function getAnnotationsByColor(_item, color) {
      const annots = _item
        .getAnnotations()
        .filter((item) => item.annotationColor === color);
      if (annots.length === 0) {
        return "";
      }
      return Zotero.BetterNotes.api.convert.annotations2html(annots, {
        noteItem: targetNoteItem,
      });
    }
    
    const attachments = Zotero.Items.get(topItem.getAttachments()).filter((i) =>
      i.isPDFAttachment()
    );
    
    let res = ``;
    
    const colors = {
      "#f9e196": "â­ çŸ¥è¯†-æœ‰è¶£çš„è§‚ç‚¹ã€äº‹å®ã€ä¾‹å­", // Yellow
      "#f0bbcb": "âš ï¸ é‡è¦çš„æ–¹æ³•", // Magenta
    };
    for (const attachment of attachments) {
      res += `ğŸ“„For Document:${attachment.attachmentFilename}`;
      for (const color in colors) {
        if (Object.hasOwnProperty.call(colors, color)) {
          const colorName = colors[color];
          const renderedAnnotations = await getAnnotationsByColor(
            attachment,
            color
          );
          if (renderedAnnotations) {
            res += `<h4><p style="background-color:${color};">${colorName}</h4></p>\n${renderedAnnotations}`;
          }
        }
      }
      const renderedAnnotations = await getAnnotationsByColor(
        attachment,
        (_annot) => !colors.includes(_annot.annotationColor)
      );
      if (renderedAnnotations) {
        res += `<h4><p>Other Annotations</p></h4>\n${renderedAnnotations}`;
      }
    }
    return res;
    }}$
    
    
    <hr />

```

### CSSä»£ç ä½¿ç”¨

![CSSä»£ç ä½¿ç”¨](https://pic-go-42.oss-cn-guangzhou.aliyuncs.com/img/202404191208629.png)

CSSä»£ç 

```css
/* ä¸ºè¡¨æ ¼è®¾ç½®è¾¹æ¡†æ ·å¼ */
/* è®¾ç½®è¡¨æ ¼çš„è¾¹æ¡†æ ·å¼ */
table {
  border-collapse: collapse;
  width: 100%;
}

/* è®¾ç½®ç¬¬ä¸€åˆ—çš„å®½åº¦ */
table th:first-child, table td:first-child {
  width: 30%; /* ä¾‹å¦‚è®¾ç½®ç¬¬ä¸€åˆ—å®½åº¦ä¸ºè¡¨æ ¼å®½åº¦çš„50% */
  font-size: 0.9em;
  text-align: center;
  vertical-align:middle!important;
}

table th {
  font-size: 1.1em!important;
  text-align: center !important; /* æ–‡æœ¬å±…ä¸­ */
  font-weight: bold !important; /* æ–‡æœ¬åŠ ç²— */
  border: 2px solid black; /* è¾¹æ¡†åŠ ç²— */
  padding: 5px; /* æ·»åŠ ä¸€äº›å†…è¾¹è· */
  color: #1e6bb8 !important; /* è®¾ç½®æ–‡å­—é¢œè‰² */
  background-color: rgba(21,100,178,0.1);
}

table tr:nth-child(2n) {
  background-color: #F8F8F8;
}
h2 {
  font-size: 1.1em;
  margin-bottom: 2em;
  margin-right: 5px;
  padding: 8px 15px;
  letter-spacing: 2px;
  color: #000000; /* ä¿æŒæ–‡å­—é¢œè‰²ä¸ºçº¯ç™½è‰² */
  border-left: 10px solid rgba(102, 204, 153, 0.5); /* å¯ä»¥æ ¹æ®éœ€è¦è°ƒæ•´è¾¹æ¡†é¢œè‰² */
  background: rgba(102, 204, 153, 0.25);
  border-radius: 5px;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2); /* æ–‡å­—é˜´å½±ï¼Œå¢å¼ºå¯¹æ¯” */
  text-align: center;
}
h1 {

  font-size: 1.2em;
  margin-bottom: 2em;
  margin-right: 5px;
  padding: 8px 15px;
  letter-spacing: 2px;
  color: #000000; /* ä¿æŒæ–‡å­—é¢œè‰²ä¸ºçº¯ç™½è‰² */
  border-left: 10px solid rgba(240, 19, 19, 0.5); /* å¯ä»¥æ ¹æ®éœ€è¦è°ƒæ•´è¾¹æ¡†é¢œè‰² */
  background: rgba(240, 19, 19, 0.25);
  border-radius: 5px;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2); /* æ–‡å­—é˜´å½±ï¼Œå¢å¼ºå¯¹æ¯” */
  box-shadow: 1px 1px 2px rgba(51, 51, 51, 0.5); /* ç›’å­é˜´å½±ï¼Œå¯æ ¹æ®éœ€è¦è°ƒæ•´ */
  text-align: center;
}
```

## æ¨¡æ¿ä¿®æ”¹å»ºè®®

### CSSæ¨¡æ¿ä¿®æ”¹å»ºè®®

å°±æ˜¯ä¸€äº›ç®€å•çš„CSSä»£ç æ ·å¼ä¿®æ”¹ï¼Œä¹‹å‰è¿˜å†™è¿‡zoteroç¬”è®°æ ·å¼ç¾åŒ–ï¼Œå½“æ—¶å†™å¾—ä»£ç å¤ªè‡­äº†ã€‚å¦‚æœå¸Œæœ›zoteroçš„ç¬”è®°æ ·å¼å¥½çœ‹ï¼Œå€’ä¹Ÿå¯èƒ½å…ˆæ‹¿æ¥ç”¨

å¦‚æœå¸Œæœ›å…·ä½“å­¦ä¹ ä¸€ä¸‹CSSä»£ç ï¼Œæ¨èæˆ‘çœ‹å¾—ä¸¤æœ¬ä¹¦

- ï¼ˆè‹±ï¼‰å®‰è¿ªÂ·å·´å¾·ï¼ˆAndy Buddï¼‰ï¼Œï¼ˆç‘å…¸ï¼‰åŸƒç±³å°”Â·æ¯”çº¦å…‹éš†å¾·ï¼ˆEmil Bj.rklundï¼‰. (2019). _ç²¾é€šCSS_ (TP393.092.2). äººæ°‘é‚®ç”µå‡ºç‰ˆç¤¾. [_ç²¾é€šCSS_ (TP393.092.2). äººæ°‘é‚®ç”µå‡ºç‰ˆç¤¾](http://book.ucdrs.superlib.net/views/specific/2929/bookDetail.jsp?dxNumber=000017932719&d=E71E6A034540FEB24182AD60C614D069&fenlei=1817041103010901)
- è¾¾ç§‘ç‰¹. (2013). _HTMLÂ  &Â  CSSÂ  è®¾è®¡ä¸æ„å»ºç½‘ç«™_. [_HTMLÂ  &Â  CSSÂ  è®¾è®¡ä¸æ„å»ºç½‘ç«™_. ](http://book.ucdrs.superlib.net/views/specific/2929/bookDetail.jsp?dxNumber=000011699905&d=3268AF23277E23EC486E34BC26C6CE68&fenlei=1817040302)

### Betternoteæ¨¡æ¿ä¿®æ”¹

- å°±çœ‹æˆ‘ç¬¬ä¸€éƒ¨åˆ†æ¨èçš„å‚è€ƒç½‘ç«™å°±è¡Œï¼›**é‡Œè¾¹ä»‹ç»äº†ç®€å•çš„è¯­æ³•å’Œä¸€äº›jsè„šæœ¬æ¥ä½¿ç”¨**
- æ¨¡æ¿æ•´ä½“ä½¿ç”¨htmlä»£ç ï¼Œå…¶ä¸­æ–‡æœ¬éƒ¨åˆ†åœ¨ç¬”è®°ä¸­æ”¯æŒmarkdown
- å¦‚æœä¿®æ”¹ä»£ç ï¼Œ**å¯ä»¥è‡ªè¡Œæ·»åŠ htmlå†…å®¹å—ï¼Œå¹¶ä¸”ç”¨jsæ¥è°ƒç”¨è®ºæ–‡å…ƒä¿¡æ¯**
- ![ç®€å•çš„ä¿®æ”¹](https://pic-go-42.oss-cn-guangzhou.aliyuncs.com/img/202404191228847.png)
- å¸¸ç”¨çš„jsè„šæœ¬è§ä¸‹
	- ![å¸¸ç”¨jsè„šæœ¬](https://pic-go-42.oss-cn-guangzhou.aliyuncs.com/img/202404191226855.png)
- å®˜æ–¹çš„jsæŸ¥çœ‹
	- å®˜æ–¹æ¡ç›®ä¿¡æ¯(æƒ³è‡ªå·±ä¿®æ”¹æ¨¡æ¿å¯ä»¥çœ‹çœ‹ï¼‰ï¼š[zotero-map-journalArticle](https://aurimasv.github.io/z2csl/typeMap.xml#map-journalArticle)
	- ![å®˜æ–¹æ¡ç›®ä¿¡æ¯](https://pic-go-42.oss-cn-guangzhou.aliyuncs.com/img/202404191235159.png)

**å…¶å®ƒæ’ä»¶ç”Ÿæˆçš„æ¡ç›®ä¿¡æ¯è°ƒç”¨**

zotero-style-æœŸåˆŠæ ‡ç­¾

```
${{
let space = " ã…¤ã…¤ ã…¤ã…¤"
return Array.prototype.map.call(
	Zotero.ZoteroStyle.api.renderCell(topItem, "publicationTags").childNodes,
	e => {
		e.innerText =  space + e.innerText + space;
		return e.outerHTML
	}
	).join(space)
}}$
```

æ ‡é¢˜ç¿»è¯‘

```
${topItem.getField("titleTranslation")}
```

æ‘˜è¦ç¿»è¯‘

```
${topItem.getField('abstractTranslation')}
```

è°ƒå–æ³¨é‡Š

```
${{
  async function getAnnotationsByColor(_item, color) {
    const annots = _item
      .getAnnotations()
      .filter((item) => item.annotationColor === color);
    if (annots.length === 0) {
      return "";
    }
    return Zotero.BetterNotes.api.convert.annotations2html(annots, {
      noteItem: targetNoteItem,
    });
  }
  
  const attachments = Zotero.Items.get(topItem.getAttachments()).filter((i) =>
    i.isPDFAttachment()
  );

  let res = ``;
  
  const colors = {
    "#f9e196": "â­ çŸ¥è¯†-æœ‰è¶£çš„è§‚ç‚¹ã€äº‹å®ã€ä¾‹å­", // Yellow
    "#f0bbcb": "âš ï¸ é‡è¦çš„æ–¹æ³•", // Magenta
  };
  for (const attachment of attachments) {
    res += `ğŸ“„For Document:${attachment.attachmentFilename}`;
    for (const color in colors) {
      if (Object.hasOwnProperty.call(colors, color)) {
        const colorName = colors[color];
        const renderedAnnotations = await getAnnotationsByColor(
          attachment,
          color
        );
        if (renderedAnnotations) {
          res += `<h4><p style="background-color:${color};">${colorName}</h4></p>\n${renderedAnnotations}`;
        }
      }
    }
    const renderedAnnotations = await getAnnotationsByColor(
      attachment,
      (_annot) => !colors.includes(_annot.annotationColor)
    );
    if (renderedAnnotations) {
      res += `<h4><p>Other Annotations</p></h4>\n${renderedAnnotations}`;
    }
  }
  return res;
  }}$
```